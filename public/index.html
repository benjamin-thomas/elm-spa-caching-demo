<!DOCTYPE html>
<html lang="en">
<!--suppress HtmlRequiredTitleElement -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--suppress HtmlUnknownTarget -->
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
<!--suppress HtmlUnknownTarget -->
<script src="/dist/elm.js"></script>
<script>

    function insertUrlParam(key, value) {
        const searchParams = new URLSearchParams(window.location.search);
        searchParams.set(key, value);
        const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?' + searchParams.toString();
        window.history.replaceState(null, '', newUrl);
    }

    const app = Elm.Main.init();
    app.ports['queryParamChanged'].subscribe(param => {
        insertUrlParam(param.key, param.val)
    });
</script>
</body>
</html>
